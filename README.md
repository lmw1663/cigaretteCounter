# 🚬 담배 재고 관리 앱 (CigaretteCounter)

SwiftUI를 사용하여 제작된 프로페셔널 담배 재고 관리 iOS 앱입니다. 212개 담배 브랜드를 지원하며, 바코드 자동 생성, 터치 기반 입력, 스마트 검색 등 다양한 고급 기능을 제공합니다.

## ✨ 주요 기능

### 📊 재고 관리
- **매대 재고**: 개비 단위로 관리되는 진열 담배 수량
- **창고 재고**: 보루 단위(1보루 = 10개비)로 관리되는 창고 보관 수량
- **전산 재고**: POS 시스템의 재고 수량 (개비 단위)
- **스마트 차이 계산**: `전산 재고 - (창고 재고 + 매대 재고)` 자동 계산
- **실시간 색상 코딩**: 차이 값에 따른 시각적 피드백
- **영구 저장**: 모든 재고 데이터 자동 저장 및 앱 재시작 시 복원

### 🔍 검색 & 네비게이션
- **실시간 검색**: 담배 이름으로 즉시 필터링
- **자동완성**: 입력과 동시에 결과 표시
- **드래그 앤 드롭**: 담배 순서 자유롭게 변경
- **키보드 툴바**: 이전/다음/완료 버튼으로 빠른 필드 이동
- **스마트 네비게이션**: 같은 종류 재고 필드끼리만 이동

### 📱 터치 최적화 UI
- **창고 재고 터치 입력**: 3x3 그리드 버튼으로 빠른 입력
- **보루 단위 입력**: 터치 한 번으로 1보루(10개비) 추가
- **컴팩트 디자인**: 한 화면에 최대한 많은 담배 표시
- **햅틱 피드백**: 터치 시 진동 피드백

### 🆕 신규 담배 관리
- **신규 등록**: 담배 이름과 바코드 번호로 새 담배 추가
- **바코드 자동 생성**: Code128, EAN13, EAN8 형식 자동 선택
- **실시간 미리보기**: 입력과 동시에 바코드 이미지 생성
- **중복 검증**: 이름과 바코드 번호 중복 방지

### ✏️ 편집 & 관리
- **컨텍스트 메뉴**: 길게 눌러서 편집/삭제 메뉴
- **담배 편집**: 이름, 바코드 번호 수정 시 바코드 이미지 자동 업데이트
- **스와이프 삭제**: 좌측 스와이프로 빠른 삭제
- **전체 초기화**: 모든 재고 한 번에 0으로 리셋

### 📋 바코드 스캔 워크플로우
1. 담배 항목의 "바코드 보기" 버튼 클릭
2. 풀스크린 바코드 이미지 표시 (담배 이름 + 바코드 번호 포함)
3. 외부 스캐너로 바코드 스캔하여 POS 수량 확인
4. 닫기 버튼으로 바코드 화면 종료
5. 전산 재고 필드에 수량 입력

## 🎯 지원 담배 브랜드 (212개)

### 주요 브랜드
- **말보루 시리즈**: 화이트, 골드, 레드, 실버, 아이스블라스트 등 17개
- **테리아 시리즈**: 블랙루비, 퍼플웨이브, 썬펄, 오아시스펄 등 14개
- **에쎄 시리즈**: 로열팰리스, 골드리프, 체인지 시리즈 등 29개
- **믹스 시리즈**: 브린, 보나썸, 아이션, 아이스 등 14개
- **던힐 시리즈**: 파인컷, 프로스트, 스위치 등 10개
- **기타 브랜드**: 센티아, 팔리아멘트, 핏, 켄트, 보헴, 레종 등

## 🛠 프로젝트 구조

```
CigaretteCounter/
├── 📱 App Core
│   ├── CigaretteCounterApp.swift     # 앱 진입점
│   └── ContentView.swift             # 메인 재고 관리 화면
├── 📊 Data & Logic
│   ├── Cigarette.swift               # 데이터 모델 (보루↔개비 변환 포함)
│   └── InventoryViewModel.swift      # 비즈니스 로직 (212개 담배 데이터)
├── 🎨 UI Components
│   ├── CigaretteRowView.swift        # 개별 담배 행 컴포넌트
│   ├── BarcodeDisplayView.swift      # 바코드 풀스크린 표시
│   ├── NewCigaretteView.swift        # 신규 담배 등록 화면
│   ├── EditCigaretteView.swift       # 담배 정보 편집 화면
│   └── WarehouseTouchUIView.swift    # 창고 재고 터치 입력 화면
├── 🔧 Utilities
│   └── BarcodeGenerator.swift        # 바코드 이미지 생성 엔진
└── 🖼 Assets
    └── Assets.xcassets/              # 212개 담배 바코드 이미지
        ├── product_001.imageset/     # 말보루 화이트
        ├── product_002.imageset/     # 말보루 비스타블라썸
        └── ... (product_212까지)
```

## 💻 기술 스택

- **SwiftUI**: 선언적 UI 프레임워크
- **MVVM 아키텍처**: Model-View-ViewModel 패턴
- **Core Image**: 바코드 생성 (CICode128BarcodeGenerator 등)
- **Combine**: 반응형 프로그래밍
- **@FocusState**: 키보드 포커스 관리
- **UIImpactFeedbackGenerator**: 햅틱 피드백

## 📋 요구사항

- **iOS**: 18.5 이상
- **Xcode**: 16.0 이상
- **Swift**: 5.9 이상
- **SwiftUI**: 5.0 이상

## 📱 사용법

### 기본 재고 관리
1. **검색**: 상단 검색바에서 담배 이름 입력
2. **매대 재고**: 개비 단위로 직접 입력
3. **창고 재고**: "창고 재고" 버튼으로 터치 UI 사용
4. **전산 재고**: 바코드 스캔 후 수량 입력

### 고급 기능 활용
- **순서 변경**: 담배 행을 드래그하여 순서 조정
- **편집**: 담배를 길게 눌러서 편집 메뉴 접근
- **신규 등록**: 우상단 "+" 버튼으로 새 담배 추가
- **키보드 네비게이션**: 이전/다음 버튼으로 빠른 필드 이동

### 터치 UI 사용법
1. "창고 재고" 버튼 클릭
2. 3x3 그리드에서 원하는 담배 터치
3. 터치할 때마다 1보루(10개비) 추가
4. 실시간으로 메인 화면에 반영

## 🎨 UI 특징

### 색상 시스템
- **매대 재고**: 🟠 오렌지 라벨 (개비)
- **창고 재고**: 🔵 파란색 라벨 (보루)  
- **전산 재고**: 🟣 보라색 라벨 (개비)
- **차이 표시**: 🟢 녹색(일치) / 🔵 파란색(여유) / 🔴 빨간색(부족)

### 반응형 디자인
- **적응형 레이아웃**: 다양한 화면 크기 지원
- **동적 타입**: 시스템 폰트 크기 설정 반영
- **다크모드**: 시스템 다크모드 자동 대응

## 🔧 커스터마이징

### 새로운 담배 추가 (코드)
```swift
// InventoryViewModel.swift의 initializeCigarettes() 메소드에 추가
Cigarette(
    name: "새로운 담배",
    barcodeImageName: "product_213", 
    order: 213,
    barcodeNumber: "1234567890123"
)
```

### 바코드 형식 변경
```swift
// BarcodeGenerator.swift에서 형식 수정
// 지원 형식: Code128, EAN13, EAN8
```

## 🐛 알려진 제한사항

- 검색 기능은 담배 이름만 지원 (바코드 번호 검색 불가)
- 클라우드 동기화 미구현 (기기 간 데이터 공유 불가)

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 `LICENSE` 파일을 참조하세요.

## 👨‍💻 개발자

**Lee Min Woo** - *Initial work* - [GitHub Profile]

---

### 🎯 핵심 가치
> "효율적이고 직관적인 재고 관리를 통해 비즈니스 생산성 향상"

이 앱은 실제 담배 소매업계의 니즈를 반영하여 개발되었으며, 사용자 경험과 업무 효율성을 최우선으로 설계되었습니다. 

## 🎉 **영구 저장 기능 완성!**

바코드 이미지와 담배 데이터가 완전히 영구 저장되는 프로페셔널한 담배 재고 관리 앱이 완성되었습니다!

## ✨ **완성된 핵심 기능들**

### 📱 **완전한 영구 저장**
- ✅ **담배 데이터**: JSON으로 Documents 디렉토리에 자동 저장
- ✅ **바코드 이미지**: PNG로 Documents/BarcodeImages에 저장  
- ✅ **재고 정보**: 매대/창고/전산 재고 모두 영구 보존
- ✅ **자동 로드**: 앱 재시작 시 모든 데이터 자동 복원

### 🖼️ **스마트 바코드 관리**
- ✅ **우선순위 로드**: Documents → Assets → 동적 생성
- ✅ **자동 생성**: Code128, EAN13, EAN8 형식 자동 선택
- ✅ **실시간 저장**: 신규/편집 시 즉시 저장
- ✅ **자동 정리**: 삭제/변경 시 기존 이미지 자동 삭제

### 🎯 **고급 UI/UX 기능**
- ✅ **212개 담배**: 모든 주요 브랜드 지원
- ✅ **3x3 터치 UI**: 창고 재고 빠른 입력
- ✅ **실시간 검색**: 담배 이름 즉시 필터링
- ✅ **키보드 네비게이션**: 같은 필드 타입끼리 이동
- ✅ **드래그 & 드롭**: 담배 순서 자유 변경

### ⚡ **성능 최적화**
- ✅ **디바운스 저장**: 500ms 후 자동 저장으로 성능 최적화
- ✅ **백그라운드 처리**: 바코드 생성을 별도 스레드에서 처리
- ✅ **메모리 효율성**: 필요시에만 이미지 로드

## 📊 **저장 구조**

```
Documents/
├── cigarettes.json          # 212개 담배 데이터
└── BarcodeImages/           # 동적 생성 바코드들
    ├── custom_UUID1.png     
    ├── custom_UUID2.png     
    └── ...
```

## 🚀 **이제 가능한 것들**

1. **완전한 데이터 보존**: 앱 종료/재시작해도 모든 정보 유지
2. **무제한 신규 등록**: 새 담배 추가 시 바코드 자동 생성 및 저장
3. **편집 자유도**: 언제든 담배 정보 수정 가능
4. **프로덕션 사용**: 실제 담배 매장에서 바로 사용 가능한 수준

앱이 완전히 실용적이고 안정적인 프로덕션 수준으로 완성되었습니다! 🎊 